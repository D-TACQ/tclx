#
# string.test
#
# Tests for the cindex, clength, crange, replicate, csubstr, and translit
# commands.
#---------------------------------------------------------------------------
# Copyright 1992 Karl Lehenbauer and Mark Diekhans.
#
# Permission to use, copy, modify, and distribute this software and its
# documentation for any purpose and without fee is hereby granted, provided
# that the above copyright notice appear in all copies.  Karl Lehenbauer and
# Mark Diekhans make no representations about the suitability of this
# software for any purpose.  It is provided "as is" without express or
# implied warranty.
#------------------------------------------------------------------------------
# $Id: string.test,v 2.0 1992/10/16 04:50:12 markd Rel markd $
#------------------------------------------------------------------------------
#

if {[info procs test] != "test"} then {source testlib.tcl}

# Test the 'cindex' command.

Test string-1.1 {cindex tests} {
    cindex ABCDEFG 1
} 0 {B}

Test string-1.2 {cindex tests} {
    cindex ABCDEFG 3+1
} 0 {E}

Test string-1.3 {cindex tests} {
    cindex ABCDEFG 3*2
} 0 {G}

Test string-1.4 {cindex tests} {
    cindex ABCDEFG 7
} 0 {}

# Test the 'clength' command.

Test string-2.1 {clength tests} {
    clength ABCDEFG
} 0 {7}

Test string-2.2 {clength tests} {
    clength "ABCD XYZ"
} 0 {8}

Test string-2.3 {clength tests} {
    clength
} 1 {wrong # args: clength string}

# Test the crange command.

Test string-3.1 {crange tests} {
    crange ABCDEFG 1 3
} 0 {BCD}

Test string-3.2 {crange tests} {
    crange ABCDEFG 2 end
} 0 {CDEFG}

Test string-3.3 {crange tests} {
    set foo [replicate ABCD 500]
    crange $foo 25*4 500-1
} 0 [replicate ABCD 100]

Test string-3.4 {crange tests} {
    crange
} 1 {wrong # args: crange string firstExpr lastExpr}

Test string-3.5 {crange tests} {
    crange ABCD 4 1
} 0 {}

# Test the 'replicate' command

Test string-4.1 {replicate tests} {
    replicate AbCd 4
} 0 {AbCdAbCdAbCdAbCd}

Test string-4.2 {replicate tests} {
    replicate X 1000
} 0 "[replicate X 250][replicate X 250][replicate X 250][replicate X 250]"

Test string-4.3 {replicate tests} {
    replicate X
} 1 {wrong # args: replicate string countExpr}

# Test the csubstr command.

Test string-5.1 {csubstr tests} {
    csubstr ABCDEFG 1 2+1
} 0 {BCD}

Test string-5.2 {csubstr tests} {
    csubstr ABCDEFG 1+1 end
} 0 {CDEFG}

Test string-5.3 {csubstr tests} {
    set foo [replicate ABCD 500]
    csubstr $foo 25*4 100*4
} 0 [replicate ABCD 100]

Test string-5.4 {csubstr tests} {
    csubstr
} 1 {wrong # args: csubstr string firstExpr lengthExpr}

Test string-5.5 {csubstr tests} {
    csubstr ABCD 4 1
} 0 {}

Test string-5.6 {translit tests} {
    set str "Captain Midnight Secret Decoder Ring"
    translit {A-MN-Za-mn-z} {N-ZA-Mn-za-m} $str
} 0 {Pncgnva Zvqavtug Frperg Qrpbqre Evat}

Test string-5.7 {translit tests} {
    set str "Captain Midnight Secret Decoder Ring"
    set str2 [translit {A-MN-Za-mn-z} {N-ZA-Mn-za-m} $str]
    translit {A-MN-Za-mn-z} {N-ZA-Mn-za-m} $str2
} 0 {Captain Midnight Secret Decoder Ring}

Test string-5.8 {translit tests} {
    translit
} 1 {wrong # args: translit from to string}

