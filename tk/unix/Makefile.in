#
# Makefile --
#
# Makefile to build a wish with Extended Tcl (wishx).
# 
#------------------------------------------------------------------------------
# Copyright 1992 Karl Lehenbauer and Mark Diekhans.
#
# Permission to use, copy, modify, and distribute this software and its
# documentation for any purpose and without fee is hereby granted, provided
# that the above copyright notice appear in all copies.  Karl Lehenbauer and
# Mark Diekhans make no representations about the suitability of this
# software for any purpose.  It is provided "as is" without express or
# implied warranty.
#------------------------------------------------------------------------------
# $Id: Makefile,v 2.2 1992/12/19 08:03:35 markd Exp markd $
#------------------------------------------------------------------------------
#

include ../Config.mk
include ../config/$(TCL_CONFIG_FILE)
SHELL=/bin/sh

#------------------------------------------------------------------------------

CFLAGS= $(OPTIMIZE_FLAG) $(XCFLAGS) -I../src -I../$(TCL_TK_DIR) \
        -I../$(TCL_UCB_DIR) $(MEM_DEBUG_FLAGS) $(SYS_DEP_FLAGS)

#------------------------------------------------------------------------------

OBJS= main.o

#------------------------------------------------------------------------------

all: ../wishx

../wishx: main.o ../libtk.a ../libtcl.a
	$(RANLIB_CMD) ../libtk.a
	$(CC) $(CFLAGS) main.o ../libtk.a ../libtcl.a \
            $(XLDFLAGS) $(TCL_TK_LIBS) -o ../wishx
	if $(DO_STRIPPING) ; then \
	    strip ../wishx; \
	    $(MCS_CMD) ../wishx; fi

main.o: main.c
	$(CC) -c $(CFLAGS) -DTCL_MASTERDIR=\"$(TCL_MASTERDIR)\" \
        -DTK_MASTERDIR=\"$(TK_MASTERDIR)\" main.c

#------------------------------------------------------------------------------

clean:
	-rm -f ../wishx $(OBJS)
