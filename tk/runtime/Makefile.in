#
# Makefile --
#
# Makefile for building Tcl sources used by wishx.
#------------------------------------------------------------------------------
# Copyright 1992 Karl Lehenbauer and Mark Diekhans.
#
# Permission to use, copy, modify, and distribute this software and its
# documentation for any purpose and without fee is hereby granted, provided
# that the above copyright notice appear in all copies.  Karl Lehenbauer and
# Mark Diekhans make no representations about the suitability of this
# software for any purpose.  It is provided "as is" without express or
# implied warranty.
#------------------------------------------------------------------------------
# $Id: Makefile,v 1.1 1993/06/06 15:07:30 markd Exp markd $
#------------------------------------------------------------------------------
#

include ../Config.mk
include ../config/$(TCL_CONFIG_FILE)
SHELL=/bin/sh

#------------------------------------------------------------------------------

WISHX_TCL = ../tkmaster/wishx.tcl
TK_TCL    = ../tkmaster/tk.tcl
TK_TLIB   = ../tkmaster/tk.tlib
TK_PROLOG = ../tkmaster/prolog.ps
TK_DEMOS  = ../tkmaster/demos

#------------------------------------------------------------------------------

all: made.tmp

made.tmp: $(WISHX_TCL) $(TK_TLIB) $(TK_TCL) $(TK_DEMOS)/widget
	touch made.tmp

../tkmaster:
	mkdir ../tkmaster

$(WISHX_TCL): ../$(TCL_TK_DIR)/library/wish.tcl wishx.sed ../tkmaster
	rm -f $(WISHX_TCL)
	sed -f wishx.sed <../$(TCL_TK_DIR)/library/wish.tcl >$(WISHX_TCL)

$(TK_TCL): ../$(TCL_TK_DIR)/library/tk.tcl ../tkmaster
	rm -f $(TK_TCL)
	cp ../$(TCL_TK_DIR)/library/tk.tcl $(TK_TCL)

$(TK_TLIB): ../$(TCL_TK_DIR)/library/tclIndex ../tkmaster
	../runtcl "-c convert_lib ../$(TCL_TK_DIR)/library/tclIndex $(TK_TLIB)"

$(TK_PROLOG): ../$(TCL_TK_DIR)/library/prolog.ps ../tkmaster
	cp ../$(TCL_TK_DIR)/library/prolog.ps $(TK_PROLOG)

$(TK_DEMOS)/widget: ../$(TCL_TK_DIR)/library/demos/widget ../tkmaster
	rm -rf $(TK_DEMOS)
	mkdir $(TK_DEMOS)
	(cd ../$(TCL_TK_DIR)/library/demos;tar -cf - .) | \
	    (cd $(TK_DEMOS); tar -xf -)

#------------------------------------------------------------------------------
# Build help for Tk.

buildtkhelp:
	../runtcl bldtkhelp.tcl ../$(TCL_TK_DIR)

#------------------------------------------------------------------------------

clean:
	rm -rf ../tkmaster made.tmp
